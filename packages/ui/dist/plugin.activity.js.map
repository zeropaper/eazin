{"version":3,"sources":["webpack://[name]/./src/core/plugins.propTypes.js","webpack://[name]/./src/components/Layout/Layout.Drawer.Link.jsx","webpack://[name]/./src/plugins/activity/ActivityDrawer.jsx","webpack://[name]/./src/plugins/activity/ActivityLandingView.jsx","webpack://[name]/./src/plugins/activity/activity.actions.js","webpack://[name]/./src/plugins/activity/ActivityView.jsx","webpack://[name]/./src/plugins/activity/index.js"],"names":["View","history","PropTypes","shape","push","func","isRequired","match","params","any","HeaderTabs","Drawer","withStyles","styles","classes","children","to","menuLink","ActivityDrawer","ActivityLandingView","props","WrapIn","wrapIn","upsertActivity","payload","type","upsertActivities","ActivityView","userToken","dispatch","queryAPI","headers","Accept","Authorization","loaded","activities","JSON","stringify","React","Component","mapStateToProps","settings","connect","wsBootstrap","socket","getState","console","info","on","reducer","state","action","id","Array","isArray","Object","values","reduce","acc","routes","path","LandingView","exact","reducers"],"mappings":"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","file":"plugin.activity.js","sourcesContent":["import PropTypes from 'prop-types';\n\nexport const View = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }),\n  match: PropTypes.shape({\n    params: PropTypes.any,\n  }),\n};\n\nexport const HeaderTabs = {\n  ...View,\n};\n\nexport const Drawer = {\n  ...View,\n};\n","import React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport { NavLink } from 'react-router-dom';\n\nimport styles from './Layout.Drawer.styles';\n\nexport default withStyles(styles)(({ classes, children, to }) => (\n  <NavLink\n    className={classes.menuLink}\n    to={to}\n  >\n    {children}\n  </NavLink>\n));\n","import React from 'react';\n\nimport { Drawer as DrawerPropTypes } from '../../core/plugins.propTypes';\nimport Link from '../../components/Layout/Layout.Drawer.Link';\n\nconst ActivityDrawer = () => (\n  <Link to=\"/activity\">\n    Activity\n  </Link>\n);\n\nActivityDrawer.propTypes = DrawerPropTypes;\n\nexport default ActivityDrawer;\n","import React from 'react';\n\nimport { View as ViewPropTypes } from '../../core/plugins.propTypes';\n\nconst ActivityLandingView = (props) => {\n  // eslint-disable-next-line no-console\n  // console.info('ActivityLandingView props', props);\n  const { wrapIn: WrapIn } = props;\n  return (\n    <WrapIn>\n      Landing View A\n    </WrapIn>\n  );\n};\n\nActivityLandingView.propTypes = ViewPropTypes;\n\nexport default ActivityLandingView;\n","export const upsertActivity = (payload) => ({ type: 'UPSERT_ACTIVITY', payload });\n\nexport const upsertActivities = (payload) => ({ type: 'UPSERT_ACTIVITIES', payload });\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { Typography } from '@material-ui/core';\nimport { View as ViewPropTypes } from '../../core/plugins.propTypes';\nimport { upsertActivities } from './activity.actions';\nimport queryAPI from '../../core/util/queryAPI';\n\nclass ActivityView extends React.Component {\n  async componentDidMount() {\n    const { userToken, dispatch } = this.props;\n\n    const loaded = await queryAPI('/api/activities', {\n      headers: {\n        'content-type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${userToken}`,\n      },\n    });\n\n    dispatch(upsertActivities(loaded));\n  }\n\n  render() {\n    const { activities } = this.props;\n\n    return (\n      <>\n        <header>\n          <Typography variant=\"h2\">Activity</Typography>\n        </header>\n        <pre>{JSON.stringify(activities, null, 2)}</pre>\n      </>\n    );\n  }\n}\n\nActivityView.propTypes = {\n  ...ViewPropTypes,\n  activities: PropTypes.objectOf(PropTypes.object).isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = ({\n  activities,\n  settings: { userToken } = {},\n}) => ({\n  activities,\n  userToken,\n});\n\nexport default connect(mapStateToProps)(ActivityView);\n","\nimport ActivityDrawer from /* webpackChunkName: \"ActivityDrawer\" */ './ActivityDrawer';\n// eslint-disable-next-line max-len\nimport ActivityLandingView from /* webpackChunkName: \"ActivityLandingView\" */ './ActivityLandingView';\nimport ActivityView from /* webpackChunkName: \"ActivityView\" */ './ActivityView';\n\n\nconst wsBootstrap = (socket, dispatch, getState) => {\n  // eslint-disable-next-line no-console\n  console.info('activity wsBootstrap', socket, dispatch, getState);\n  // eslint-disable-next-line no-console\n  socket.on('activity.message', (info) => console.info('activity.message', info));\n};\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case 'UPSERT_ACTIVITY':\n      if (!action.payload.id) return state;\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...(state[action.payload.id] || {}),\n          ...action.payload,\n        },\n      };\n\n    case 'UPSERT_ACTIVITIES':\n      return (Array.isArray(action.payload)\n        ? action.payload\n        : Object.values(action.payload))\n        .reduce((acc, payload) => reducer(acc, {\n          type: 'UPSERT_ACTIVITY',\n          payload,\n        }), state);\n\n    default:\n      return state;\n  }\n};\n\nconst routes = [\n  {\n    path: '/',\n    Drawer: ActivityDrawer,\n    LandingView: ActivityLandingView,\n  },\n  {\n    exact: true,\n    path: '/activity',\n    View: ActivityView,\n  },\n];\n\nexport default {\n  wsBootstrap,\n  reducers: {\n    activities: reducer,\n  },\n  routes,\n};\n"],"sourceRoot":""}